<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8" />
        <title>iaroki blog - docker</title>
        <link rel="stylesheet" href="/theme/css/main.css" />

        <!--[if IE]>
            <script src="https://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">iaroki blog </a></h1>
                <nav><ul>
                    <li><a href="/category/docker.html">Docker</a></li>
                    <li><a href="/category/linux.html">Linux</a></li>
                    <li><a href="/category/markdown.html">Markdown</a></li>
                </ul></nav>
        </header><!-- /#banner -->

            <aside id="featured" class="body">
                <article>
                    <h1 class="entry-title"><a href="/dockerfile-description.html">Dockerfile description</a></h1>
<footer class="post-info">
        <abbr class="published" title="2017-11-04T13:17:00+02:00">
                Published: Sat 04 November 2017
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/iaroki.html">iaroki</a>
        </address>
<p>In <a href="/category/docker.html">Docker</a>.</p>
<p>tags: <a href="/tag/linux.html">linux</a> <a href="/tag/docker.html">docker</a> <a href="/tag/containers.html">containers</a> <a href="/tag/dockerfile.html">dockerfile</a> </p>
</footer><!-- /.post-info --><h3>Creating image from file</h3>
<p>Go to the directory with Dockerfile and run:</p>
<div class="highlight"><pre><span></span>docker build -t imagename .
</pre></div>


<h3>Dockerfile instructions</h3>
<p><strong>FROM</strong></p>
<p><code>FROM</code> - This instruction is used to set the base image for subsequent instructions. It is mandatory to set this in the first line of a Dockerfile. You can use it any number of times though.</p>
<p>Example:</p>
<div class="highlight"><pre><span></span>FROM debian:jessie
</pre></div>


<p><strong>MAINTAINER</strong></p>
<p><code>MAINTAINER</code> - This is a non-executable instruction used to indicate the author of the Dockerfile.</p>
<p>Example:</p>
<div class="highlight"><pre><span></span>MAINTAINER iaroki
</pre></div>


<p><strong>RUN</strong></p>
<p><code>RUN</code> - This instruction lets you execute a command on top of an existing layer and create a new layer with the results of command execution.</p>
<p>Example:</p>
<div class="highlight"><pre><span></span>FROM debian:jessie
RUN apt-get update &amp;&amp; apt-get install python3 -y
</pre></div>


<p><strong>CMD</strong></p>
<p><code>CMD</code> - The major difference between <code>CMD</code> and <code>RUN</code> is that <code>CMD</code> doesn’t execute anything during the build time. It just specifies the intended command for the image. Whereas <code>RUN</code> actually executes the command during build time.</p>
<p>Note: there can be only one <code>CMD</code> instruction in a Dockerfile, if you add more, only the last one takes effect.</p>
<p>Example:</p>
<div class="highlight"><pre><span></span>CMD [&quot;echo&quot;, &quot;say hello&quot;]
</pre></div>


<p><strong>EXPOSE</strong></p>
<p><code>EXPOSE</code> - While running your service in the container you may want your container to listen on specified ports. The <code>EXPOSE</code> instruction helps you do this.</p>
<p>Example:</p>
<div class="highlight"><pre><span></span>EXPOSE 9000
</pre></div>


<p><strong>ENV</strong></p>
<p><code>ENV</code> - This instruction can be used to set the environment variables in the container.</p>
<p>Example:</p>
<div class="highlight"><pre><span></span>ENV HOME=/home/user
</pre></div>


<p><strong>USER</strong></p>
<p><code>USER</code> - This is used to set the UID (or username) to use when running the image.</p>
<p>Example:</p>
<div class="highlight"><pre><span></span>USER iaroki
</pre></div>


<p><strong>WORKDIR</strong></p>
<p><code>WORKDIR</code> - This is used to set the currently active directory for other instructions such as <code>RUN</code>, <code>CMD</code>, <code>ENTRYPOINT</code>, <code>COPY</code> and <code>ADD</code>.</p>
<p>Note that if relative path is provided, the next <code>WORKDIR</code> instruction will take it as relative to the path of previous <code>WORKDIR</code> instruction.</p>
<p>Example:</p>
<div class="highlight"><pre><span></span>WORKDIR /user
WORKDIR home
RUN pwd
</pre></div>


<p>This will output the path as <code>/user/home</code>.</p>
<p><strong>COPY</strong></p>
<p><code>COPY</code> - This instruction is used to copy files and directories from a specified source to a destination (in the file system of the container).</p>
<p>Example:</p>
<div class="highlight"><pre><span></span>COPY preconditions.txt /usr/temp
</pre></div>


<p><strong>ADD</strong></p>
<p><code>ADD</code> - This instruction is similar to the <code>COPY</code> instruction with few added features like remote URL support in the source field and local-only tar extraction. But if you don’t need a extra features, it is suggested to use <code>COPY</code> as it is more readable.</p>
<p>Example:</p>
<div class="highlight"><pre><span></span>ADD http://www.site.com/downloads/sample.tar.xz /usr/src
</pre></div>


<p><strong>ENTRYPOINT</strong></p>
<p><code>ENTRYPOINT</code> - You can use this instruction to set the primary command for the image.</p>
<p>For example, if you have installed only one application in your image and want it to run whenever the image is executed, <code>ENTRYPOINT</code> is the instruction for you.</p>
<p>Note: arguments are optional, and you can pass them during the runtime with something like <code>docker run &lt;image-name&gt;</code>.</p>
<p>Also, all the elements specified using <code>CMD</code> will be overridden, except the arguments. They will be passed to the command specified in <code>ENTRYPOINT</code>.</p>
<p>Example:</p>
<div class="highlight"><pre><span></span>CMD &quot;Hello World!&quot;
ENTRYPOINT echo
</pre></div>


<p><strong>VOLUME</strong></p>
<p><code>VOLUME</code> - You can use the <code>VOLUME</code> instruction to enable access to a location on the host system from a container. Just pass the path of the location to be accessed.</p>
<p>Example:</p>
<div class="highlight"><pre><span></span>VOLUME /data
</pre></div>


<p><strong>ONBUILD</strong></p>
<p><code>ONBUILD</code> - This instruction adds a trigger instruction to be executed when the image is used as the base for some other image. It behaves as if a <code>RUN</code> instruction is inserted immediately after the <code>FROM</code> instruction of the downstream Dockerfile. This is typically helpful in cases where you need a static base image with a dynamic config value that changes whenever a new image has to be built (on top of the base image).</p>
<p>Example:</p>
<div class="highlight"><pre><span></span>ONBUILD RUN rm -rf /usr/temp
</pre></div>                </article>
            </aside><!-- /#featured -->
                <section id="content" class="body">
                    <h1>Other articles</h1>
                    <hr />
                    <ol id="posts-list" class="hfeed">

            <li><article class="hentry">
                <header>
                    <h1><a href="/container-volumes.html" rel="bookmark"
                           title="Permalink to Container Volumes">Container Volumes</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2017-06-18T20:04:00+03:00">
                Published: Sun 18 June 2017
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/iaroki.html">iaroki</a>
        </address>
<p>In <a href="/category/docker.html">Docker</a>.</p>
<p>tags: <a href="/tag/linux.html">linux</a> <a href="/tag/docker.html">docker</a> <a href="/tag/containers.html">containers</a> </p>
</footer><!-- /.post-info -->                <p>To create Storage Container we can use:</p>
<div class="highlight"><pre><span></span>docker create -v /data --name dataContainer busybox
</pre></div>


<p>Let's add some files to it:</p>
<div class="highlight"><pre><span></span>docker cp someFile.big dataContainer:/data/
</pre></div>


<p>Now mount storage container to other running container using option <code>--volumes-from &lt;container&gt;</code>:</p>
<div class="highlight"><pre><span></span>docker run --volumes-from dataContainer alpine ls /data
</pre></div>


<p>The output will be <code>someFile …</code></p>
                <a class="readmore" href="/container-volumes.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/docker-usage.html" rel="bookmark"
                           title="Permalink to Docker usage">Docker usage</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2017-04-15T12:37:00+03:00">
                Published: Sat 15 April 2017
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/iaroki.html">iaroki</a>
        </address>
<p>In <a href="/category/docker.html">Docker</a>.</p>
<p>tags: <a href="/tag/linux.html">linux</a> <a href="/tag/docker.html">docker</a> <a href="/tag/containers.html">containers</a> </p>
</footer><!-- /.post-info -->                <p>Running container from image:
<code>docker run &lt;image-name&gt;</code></p>
<p>Enable interactive shell by adding next keys:
<code>-i</code> - intercative
<code>-t</code> - use tty</p>
<p><code>docker run -it python</code></p>
<p>To remove container after it dies add:
<code>--rm</code> - remove after exit</p>
<p><code>docker run -it --rm python</code></p>
<p>To name container for later use add:
<code>--name &lt;name&gt;</code> - name container …</p>
                <a class="readmore" href="/docker-usage.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>
                </ol><!-- /#posts-list -->
                </section><!-- /#content -->
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="http://getpelican.com/">Pelican</a></li>
                            <li><a href="http://python.org/">Python.org</a></li>
                            <li><a href="http://jinja.pocoo.org/">Jinja2</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="https://github.com">Github</a></li>
                            <li><a href="https://facebook.com">Facebook</a></li>
                            <li><a href="https://instagram.com">Instagram</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>